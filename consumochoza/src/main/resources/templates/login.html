<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login - La Choza</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" th:href="@{/assets/images/favicon.svg}" />

    <!-- PWA -->
    <link rel="manifest" th:href="@{/manifest.json}" />
    <meta name="theme-color" content="#F26522" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="La Choza" />
    <link rel="apple-touch-icon" th:href="@{/assets/images/icons/icon-192x192.png}" />

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" />
    
    <!-- CSS propio de login: href directo + th:href para manejar context-path -->
    <link rel="stylesheet" href="/css/style-login.css" th:href="@{/css/style-login.css}" />
</head>
<body class="login-page">

    <div class="login-card">
        <div class="login-header">
            <img th:src="@{/assets/images/logolachoza.jpg}" alt="La Choza" />
            <h2 class="text-naranja-choza">La Choza</h2>
            <p>Sistema de Gestión</p>
        </div>
        
        <div class="login-body">
            <div th:if="${param.error}" class="alert alert-danger d-flex align-items: center gap-2">
                <i class="bi bi-exclamation-circle-fill"></i> Error de credenciales
            </div>
           
            
            <form th:action="@{/login}" method="post">
                <div class="input-group-custom">
                    <i class="bi bi-person-fill text-naranja-choza"></i>
                    <input type="text" class="form-control" name="username" placeholder="Usuario" required autofocus />
                </div>
                
                <div class="input-group-custom">
                    <i class="bi bi-lock-fill text-naranja-choza"></i>
                    <input type="password" class="form-control" name="password" placeholder="Contraseña" required />
                </div>
                
                <div class="form-check mb-4">
                    <input class="form-check-input" type="checkbox" id="remember" name="remember-me" />
                    <label class="form-check-label" for="remember">Recordarme</label>
                </div>
                
                <button type="submit" class="btn btn-primary btn-login w-100">
                    <i class="bi bi-box-arrow-in-right me-2"></i> Iniciar Sesión
                </button>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Service Worker PWA -->
    <script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js')
                .then(function(reg) { console.log('SW registrado:', reg.scope); })
                .catch(function(err) { console.log('SW error:', err); });
        });
    }
    </script>
</body>
</html>